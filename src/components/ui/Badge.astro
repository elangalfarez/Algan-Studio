---
// src/components/ui/Badge.astro
// Created: Badge component for tags, labels, and status indicators

interface Props {
  variant?: 'default' | 'primary' | 'secondary' | 'success' | 'warning' | 'error' | 'info';
  size?: 'sm' | 'md' | 'lg';
  rounded?: boolean;
  removable?: boolean;
  dot?: boolean;
  class?: string;
}

const {
  variant = 'default',
  size = 'md',
  rounded = false,
  removable = false,
  dot = false,
  class: className,
} = Astro.props;

// Base styles
const baseStyles = [
  'inline-flex items-center gap-1.5',
  'font-medium',
  'transition-colors duration-[var(--duration-fast)]',
];

// Variant styles
const variantStyles = {
  default: 'bg-[color:var(--color-bg-secondary)] text-[color:var(--color-text-secondary)]',
  primary: 'bg-[color:var(--color-accent-subtle)] text-[color:var(--color-accent)]',
  secondary: 'bg-[color:var(--color-bg-inverse)] text-[color:var(--color-text-inverse)]',
  success: 'bg-[color:var(--color-success-bg)] text-[color:var(--color-success)]',
  warning: 'bg-[color:var(--color-warning-bg)] text-[color:var(--color-warning)]',
  error: 'bg-[color:var(--color-error-bg)] text-[color:var(--color-error)]',
  info: 'bg-[color:var(--color-info-bg)] text-[color:var(--color-info)]',
};

// Size styles
const sizeStyles = {
  sm: 'text-xs px-2 py-0.5',
  md: 'text-xs px-2.5 py-1',
  lg: 'text-sm px-3 py-1.5',
};

// Dot styles
const dotStyles = {
  default: 'bg-[color:var(--color-text-muted)]',
  primary: 'bg-[color:var(--color-accent)]',
  secondary: 'bg-[color:var(--color-text-inverse)]',
  success: 'bg-[color:var(--color-success)]',
  warning: 'bg-[color:var(--color-warning)]',
  error: 'bg-[color:var(--color-error)]',
  info: 'bg-[color:var(--color-info)]',
};

const allStyles = [
  ...baseStyles,
  variantStyles[variant],
  sizeStyles[size],
  rounded ? 'rounded-full' : 'rounded-md',
  className,
].filter(Boolean);
---

<span class:list={allStyles}>
  {dot && (
    <span 
      class:list={[
        'w-1.5 h-1.5 rounded-full flex-shrink-0',
        dotStyles[variant],
      ]}
      aria-hidden="true"
    />
  )}
  
  <slot />
  
  {removable && (
    <button
      type="button"
      class="ml-0.5 -mr-1 p-0.5 rounded hover:bg-black/10 transition-colors focus:outline-none focus:ring-1 focus:ring-current"
      aria-label="Remove"
    >
      <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  )}
</span>