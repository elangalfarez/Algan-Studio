---
// src/components/ui/Radio.astro
// Created: Custom styled radio button with label and description

interface Props {
  name: string;
  id?: string;
  label?: string;
  description?: string;
  value: string;
  checked?: boolean;
  required?: boolean;
  disabled?: boolean;
  size?: 'sm' | 'md' | 'lg';
  class?: string;
}

const {
  name,
  id,
  label,
  description,
  value,
  checked = false,
  required = false,
  disabled = false,
  size = 'md',
  class: className,
} = Astro.props;

const inputId = id || `${name}-${value}`;

// Size styles
const sizeStyles = {
  sm: {
    radio: 'w-4 h-4',
    label: 'text-sm',
    description: 'text-xs',
  },
  md: {
    radio: 'w-5 h-5',
    label: 'text-base',
    description: 'text-sm',
  },
  lg: {
    radio: 'w-6 h-6',
    label: 'text-lg',
    description: 'text-base',
  },
};

const sizes = sizeStyles[size];
---

<div class:list={['relative flex items-start gap-3', className]}>
  <div class="flex items-center h-6">
    <input
      type="radio"
      name={name}
      id={inputId}
      value={value}
      checked={checked}
      required={required}
      disabled={disabled}
      aria-describedby={description ? `${inputId}-description` : undefined}
      class:list={[
        'radio-custom',
        sizes.radio,
        'rounded-full',
        'border-2 border-[color:var(--color-border-strong)]',
        'transition-all duration-[var(--duration-fast)]',
        'focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[color:var(--color-accent)]',
        'cursor-pointer',
        disabled && 'opacity-50 cursor-not-allowed',
      ]}
    />
  </div>

  {(label || description) && (
    <div class="flex-1 min-w-0">
      {label && (
        <label
          for={inputId}
          class:list={[
            'font-medium text-[color:var(--color-text-primary)] cursor-pointer',
            sizes.label,
            disabled && 'opacity-50 cursor-not-allowed',
          ]}
        >
          {label}
        </label>
      )}
      
      {description && (
        <p
          id={`${inputId}-description`}
          class:list={[
            'text-[color:var(--color-text-muted)] mt-0.5',
            sizes.description,
          ]}
        >
          {description}
        </p>
      )}
    </div>
  )}
</div>

<style>
  .radio-custom {
    appearance: none;
    background-color: var(--color-bg-tertiary);
    position: relative;
  }

  .radio-custom:checked {
    border-color: var(--color-accent);
  }

  .radio-custom:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50%;
    height: 50%;
    border-radius: 50%;
    background-color: var(--color-accent);
  }

  .radio-custom:hover:not(:disabled):not(:checked) {
    border-color: var(--color-accent);
  }

  @media (prefers-reduced-motion: reduce) {
    .radio-custom {
      transition: none;
    }
  }
</style>