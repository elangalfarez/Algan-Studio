---
// src/components/ui/Marquee.astro
// Created: Infinite scrolling marquee for logos, testimonials, etc.

interface Props {
  speed?: 'slow' | 'normal' | 'fast';
  direction?: 'left' | 'right';
  pauseOnHover?: boolean;
  gap?: 'sm' | 'md' | 'lg';
  class?: string;
}

const {
  speed = 'normal',
  direction = 'left',
  pauseOnHover = true,
  gap = 'md',
  class: className,
} = Astro.props;

// Speed styles (animation duration)
const speedStyles = {
  slow: '60s',
  normal: '40s',
  fast: '20s',
};

// Gap styles
const gapStyles = {
  sm: 'gap-6',
  md: 'gap-10',
  lg: 'gap-16',
};

const animationDuration = speedStyles[speed];
const animationDirection = direction === 'right' ? 'reverse' : 'normal';
---

<div
  class:list={[
    'marquee-container overflow-hidden',
    pauseOnHover && 'pause-on-hover',
    className,
  ]}
  style={`--marquee-duration: ${animationDuration}; --marquee-direction: ${animationDirection};`}
>
  <div class:list={['marquee-content flex items-center', gapStyles[gap]]}>
    {/* Original content */}
    <div class:list={['marquee-items flex items-center flex-shrink-0', gapStyles[gap]]}>
      <slot />
    </div>
    
    {/* Duplicate for seamless loop */}
    <div class:list={['marquee-items flex items-center flex-shrink-0', gapStyles[gap]]} aria-hidden="true">
      <slot />
    </div>
  </div>
</div>

<style>
  .marquee-container {
    mask-image: linear-gradient(
      to right,
      transparent,
      black 5%,
      black 95%,
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 5%,
      black 95%,
      transparent
    );
  }

  .marquee-content {
    width: max-content;
    animation: marquee var(--marquee-duration) linear infinite;
    animation-direction: var(--marquee-direction);
  }

  .pause-on-hover:hover .marquee-content {
    animation-play-state: paused;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Reverse direction adjustment */
  .marquee-container[style*="reverse"] .marquee-content {
    animation-direction: reverse;
  }

  @media (prefers-reduced-motion: reduce) {
    .marquee-content {
      animation: none;
    }
    
    .marquee-items:nth-child(2) {
      display: none;
    }
  }
</style>