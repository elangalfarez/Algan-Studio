---
// src/components/work/CaseStudyGallery.astro
// Created: Image gallery section for case study pages

import { Lightbox, LightboxTrigger } from '../ui';

interface GalleryImage {
  src: string;
  alt: string;
  caption?: string;
}

interface Props {
  images: GalleryImage[];
  client: string;
}

const { images, client } = Astro.props;

// Transform images for Lightbox component
const lightboxImages = images.map((img, index) => ({
  id: `gallery-${index}`,
  src: img.src,
  alt: img.alt,
  title: img.caption || img.alt,
}));
---

{images.length > 0 && (
  <section class="section bg-[color:var(--color-bg-secondary)]">
    <div class="container">
      <div class="text-center mb-12">
        <span class="text-[color:var(--color-accent)] text-sm font-medium uppercase tracking-wider mb-2 block">
          Project Gallery
        </span>
        <h2 class="text-2xl md:text-3xl font-bold text-[color:var(--color-text-primary)]">
          See the Work
        </h2>
      </div>

      {/* Gallery Grid */}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
        {images.map((image, index) => (
          <div
            class:list={[
              'group relative rounded-xl overflow-hidden cursor-pointer',
              index === 0 && 'md:col-span-2 aspect-video',
              index > 0 && 'aspect-[4/3]',
            ]}
            data-animate="fade-up"
            data-delay={String(index * 0.1)}
          >
            {/* Image placeholder */}
            <div class="absolute inset-0 bg-gradient-to-br from-[color:var(--color-bg-primary)] to-[color:var(--color-bg-tertiary)]">
              <div class="w-full h-full flex items-center justify-center text-[color:var(--color-text-muted)]">
                <span class="text-sm">{image.caption || image.alt}</span>
              </div>
            </div>

            {/* Uncomment when images are ready and use with Lightbox
            <LightboxTrigger
              client:visible
              images={lightboxImages}
              initialIndex={index}
            >
              <img
                src={image.src}
                alt={image.alt}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                loading="lazy"
                decoding="async"
              />
            </LightboxTrigger>
            */}

            {/* Hover overlay */}
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors duration-300 flex items-center justify-center">
              <div class="w-12 h-12 rounded-full bg-white/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity transform scale-75 group-hover:scale-100">
                <svg class="w-6 h-6 text-[color:var(--color-text-primary)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" />
                </svg>
              </div>
            </div>

            {/* Caption */}
            {image.caption && (
              <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                <p class="text-white text-sm">{image.caption}</p>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  @media (prefers-reduced-motion: reduce) {
    .group img {
      transition: none;
    }
    
    .group:hover img {
      transform: none;
    }
  }
</style>